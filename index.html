<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USP-Cards</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="cabecalho">
        
        <h1>USP-Cards</h1>
        <button type="button" class="modal-cadastro modal-btn" data-toggle="modal" data-target="#modal-cadastro">Inscrever-se</button>
        <button type="button" class="modal-btn modal-login" data-toggle="modal" data-target="#modal-login">Entrar</button>
    </header>

    <div id="quadrado" style="display: none;">
        <div id="modal-cadastro" class="modal fade modal-cadastro" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Inscrever-se</h4>
                    </div>
                    <div class="modal-body">
                        <form id="cadastro" class="text-align-center">
                            <fieldset>
                                <input type="text" name="credenciais[email]" id="email" placeholder="Email">
                                <input type="password" name="credenciais[senha]" id="senha" placeholder="Senha">
                                <input type="password" name="credenciais[confirma√ß√£o_senha]" placeholder="Confirmar senha">
                                <input type="submit" name="submit" value="Enviar">
                            </fieldset>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <p id="mensagem-cadastro" class="mensagem-cadastro text-align-center"></p>
                    </div>
                </div>
            </div>
        </div>

        <div id="modal-login" class="modal fade modal-login" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Entrar</h4>
                    </div>
                    <div class="modal-body">
                        <form id="login" class="text-align-center">
                            <fieldset>
                                <input type="text" name="credenciais[email]" id="email" placeholder="Email">
                                <input type="password" name="credenciais[senha]" id="senha" placeholder="Senha">
                                <input type="submit" name="submit" value="Enviar">

                            </fieldset>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <p id="mensagem-login" class="mensagem-login text-align-center"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    

    <div class="titulo-heroi">
        <h1 id="titulo-heroi" class="titulo-heroi text-align-center"></h1>
        <h3 id="mensagem-cabecalho" class="mensagem-cabecalho text-align-center">
            Flashcards M√°gicos: Memorize TUDO!!!
        </h3>
        <h3 id="mensagem-descer" class="mensagem-descer" data-content="Role para baixo para saber mais"></h3>
    </div>

    <div class="container container-red">
        <h2>O que s√£o USP-Cards?</h2>

        <div class="info-box">
            <h3>Flashcards M√ÅGICOS</h3>
            <p>Num belo dia na cantina do bandej√£o central, desvendamos um encanto m√°gico capaz de fazer voc√™ memorizar at√© a receita do feij√£o dos tios e tias do bandeco! Seja para dominar um novo idioma ou para decorar toda a mat√©ria de MAC0350 poucos minutos antes da prova. √â como se tiv√©ssemos descoberto o elixir da mem√≥ria instant√¢nea! üßô‚Äç‚ôÇÔ∏è‚ú®</p>
        </div>

    </div>
    <div class="container container-green">
        <h2>Como Usar?</h2>
        <div class="info-box">
            <h3>Crie Flashcards como um Mago</h3>
            <p>Com um simples toque da sua varinha ü™Ñ (ou clique do mouse), voc√™ pode criar novos flashcards! Basta fornecer uma breve descri√ß√£o e atribuir uma categoria m√°gica.</p>
        </div>
        <div class="info-box">
            <h3>Memorize Tudo, at√© Feiti√ßos</h3>
            <p>Os flashcards s√£o como p√≥ m√°gico para sua mem√≥ria. Eles t√™m o poder de fazer voc√™ lembrar de tudo, desde fun√ß√µes em kotlin para o seu BackEnd at√© os segredos dos antigos magos! ‚ú®</p>
        </div>
        <div class="info-box">
            <h3>Navegue Pelos Tr√™s Modos como um Feiticeiro</h3>
            <p>Escolha entre Estudo, Quiz e Prioridades com a habilidade de um verdadeiro mago. Prepare-se para dominar todos os mist√©rios e encantos! üìöüßô‚Äç‚ôÇÔ∏è</p>
        </div>
        <div class="info-box">
            <h3>Acompanhe o Progresso como um Alquimista</h3>
            <p>Testemunhe a magia acontecer enquanto voc√™ acompanha seu progresso. √â como observar a po√ß√£o de conhecimento borbulhando na sua frente! üìäüîÆ</p>
        </div>
    </div>




<div class="flip-background">
    <div class="x">
        <h1>Como funciona o USP-Cards?</h1>
        <br>
        <p>Deslize para a direita para curtir ou para a esquerda para passar, ou na carta para relembrar</p>
    </div>
    <div class="flip-card" id="card">
        <div class="flip-card-inner">
            <div class="flip-card-front">
                <h1>Hello World!</h1>
                <div class="tinder--buttons">
                    <button id="swipeLeft" style="background-color: red;"><i class="fa fa-arrow-left"></i></button>
                    <button id="swipeRight" style="background-color: green;"><i class="fa fa-arrow-right"></i></button>
                </div>
            </div>
            <div class="flip-card-back">
                <h1>Oi Mundo!</h1>
                <p>Architect & Engineer</p>
                <p>We love that guy</p>
            </div>
        </div>
    </div>
</div>


    <script src="main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-sha256/0.9.0/sha256.min.js"></script>

    <script>
    var formCadastro = document.getElementById('cadastro');
var formLogin = document.getElementById('login');

// Fun√ß√£o para redirecionar para oi.html
function redirectToOi() {
    window.location.href = 'oi.html';
}

formCadastro.addEventListener('submit', function(event) {
    event.preventDefault();
    var email = document.querySelector('#modal-cadastro #email').value; // Seleciona o campo de e-mail dentro do modal de cadastro
    var senha = document.querySelector('#modal-cadastro #senha').value; // Seleciona o campo de senha dentro do modal de cadastro

    // Criptografar a senha utilizando SHA-256
    var senhaCriptografada = sha256(senha);

    var data = {
        username: email,
        password: senhaCriptografada
    }
    console.log(data);

    fetch('http://localhost:8080/user', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(data),
    })
    .then(response => {
        if (response.ok) {
            fecharQuadrado();
        } else {
            // Se houver algum erro, exibe uma mensagem de erro
            console.error('Erro ao cadastrar usu√°rio');
        }
    })
    .catch((error) => {
        console.error('Erro:', error);
    });

});


document.addEventListener('DOMContentLoaded', function() {
    var formLogin = document.getElementById('login');

    // Fun√ß√£o para criar e exibir um aviso
    function showWarning(message) {
        // Cria um elemento <div> para o aviso
        var warningDiv = document.createElement('div');
        warningDiv.classList.add('alert'); // Adiciona a classe 'alert'
        warningDiv.textContent = message; // Define o texto do aviso

        // Adiciona o aviso ao final do formul√°rio de login
        formLogin.appendChild(warningDiv);

        // Remove o aviso ap√≥s 5 segundos
        setTimeout(function() {
            formLogin.removeChild(warningDiv);
        }, 5000);
    }

    // Fun√ß√£o para redirecionar para oi.html com o ID do usu√°rio
    function redirectToOi(userId) {
        // Salva o ID do usu√°rio no armazenamento local
        localStorage.setItem('userId', userId);

        // Redireciona para oi.html
        window.location.href = 'oi.html';
    }

    formLogin.addEventListener('submit', function(event) {
        event.preventDefault();
        var email = document.querySelector('#modal-login #email').value; // Seleciona o campo de e-mail dentro do modal de login
        var senha = document.querySelector('#modal-login #senha').value; // Seleciona o campo de senha dentro do modal de login

        // Criptografar a senha utilizando SHA-256
        var senhaCriptografada = sha256(senha);

        // Realiza uma solicita√ß√£o GET para obter a lista de todos os usu√°rios
        fetch('http://localhost:8080/users')
        .then(response => response.json())
        .then(users => {
            // Verifica se existe algum usu√°rio com o email e senha fornecidos
            console.log(users);

            var user = users.find(user => user.username === email && user.password === senhaCriptografada);
            console.log(user);
            if (user) {
                // Se o usu√°rio existir e a senha estiver correta, redireciona para oi.html com o ID do usu√°rio
                redirectToOi(user.id);
            } else {
                // Se o usu√°rio n√£o existir ou a senha estiver incorreta, exibe um aviso
                showWarning('Email ou senha incorretos.');
            }
        })
        .catch(error => {
            console.error('Erro:', error);
            // Exibe um aviso gen√©rico caso ocorra algum erro na solicita√ß√£o
            showWarning('Erro ao tentar fazer login. Por favor, tente novamente mais tarde.');
        });
    });
});
</script>
</body>


<footer>
    <h2>USP-Cards</h2>
    
    <div class="footer-content">
        <div class="about-us">
            <h3>Sobre n√≥s</h3>
            <p>Somos Eduardo F e Guilherme W, estudantes de ci√™ncia da computa√ß√£o apaixonados por desenvolvimento web.</p>
        </div>
        <div class="social-media">
            <h3>Redes   Sociais</h3>
            <div class="social-buttons">
                <a href="#" class="github">GitHub</a>
                <a href="#" class="instagram">Instagram</a>
                <a href="#" class="whatsapp">WhatsApp</a>
            </div>
        </div>
        <div class="contact-info">
            <h3>Contato</h3>
            <p>Telefone: (xx) xxxx-xxxx</p>
            <p>Email: contato@usp-cards.com</p>
        </div>
        
    </div>
    <p>&copy; 2024 - Todos os direitos reservados</p>
</footer>


</html>
